name: CNU General Bots

# on:
#   # push: #ì¦ì€ action ë°©ì§€(ì°¨ë‹¨ ì›ì¸1)
#   schedule:
#     #  09, 12, 15, 18, 21ì‹œ ì‹¤í–‰
#     - cron: '15 0,3,6,9,12 * * *'
#   workflow_dispatch:      # ìˆ˜ë™ ì‹¤í–‰ ë²„íŠ¼
  
# permissions:
#   contents: write
  
# jobs:
#   run-bot:
#     runs-on: ubuntu-latest
    
#     # ì‹œê°„ëŒ€ ì„¤ì •
#     env:
#       TZ: 'Asia/Seoul'

#     steps:
#       - name: ì €ì¥ì†Œ ì½”ë“œ ë¶ˆëŸ¬ì˜¤ê¸°
#         uses: actions/checkout@v3

#       - name: íŒŒì´ì¬ ì„¤ì •í•˜ê¸°
#         uses: actions/setup-python@v4
#         with:
#           python-version: '3.9'

#       - name: ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜í•˜ê¸°
#         run: |
#           pip install -r requirements.txt

#       - name: ë´‡ 3ê°œ ì‹¤í–‰í•˜ê¸°
#         env:
#           # 1. ê´€ë¦¬ììš© ì—ëŸ¬ ì•Œë¦¼
#           MONITOR_WEBHOOK_URL: ${{ secrets.MONITOR_WEBHOOK_URL }}
          
#           # 2. í•™ê³¼ ê³µì§€ìš© (cnu_bot.py)
#           cse_WEBHOOK_URL: ${{ secrets.cse_WEBHOOK_URL }}
          
#           # 3. ë„ì„œê´€ ê³µì§€ìš© (library_bot.py)
#           library_WEBHOOK_URL: ${{ secrets.library_WEBHOOK_URL }}
          
#           # 4. ê¸°ìˆ™ì‚¬ ê³µì§€ìš© (dorm_bot.py)
#           dorm_WEBHOOK_URL: ${{ secrets.dorm_WEBHOOK_URL }}
          
#         run: |
#           echo "ğŸ“š ë„ì„œê´€ ê³µì§€ í™•ì¸ ì¤‘..."
#           python src/library_bot.py
          
#           echo "ğŸ›Œ ê¸°ìˆ™ì‚¬ ê³µì§€ í™•ì¸ ì¤‘..."
#           python src/dorm_bot.py

#           echo "ğŸ« í•™ê³¼ ê³µì§€ í™•ì¸ ì¤‘..."
#           python src/cse_bot.py

#       - name: ë°ì´í„° ë³€ê²½ì‚¬í•­ ì €ì¥í•˜ê¸° (data í´ë” ë‚´ JSON)
#         run: |
#           git config --global user.name "GitHub Action Bot"
#           git config --global user.email "actions@github.com"
          
#           # data í´ë” ì•ˆì˜ ëª¨ë“  json íŒŒì¼ ë‹´ê¸°
#           git add -f data/*.json || true
          
#           if git diff --staged --quiet; then
#             echo "ë³€ê²½ëœ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤."
#           else
#             echo "ìƒˆë¡œìš´ ê¸€ì„ ë°œê²¬í•˜ì—¬ ê¸°ë¡ ì—…ë°ì´íŠ¸"
#             git commit -m "Bot: General ë´‡ ë°ì´í„° ê°±ì‹ "
#             git pull --rebase origin main
#             git push
#           fi
